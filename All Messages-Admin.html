<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>All Messages-Admin</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <script src="https://kit.fontawesome.com/3ed11200e3.js" crossorigin="anonymous"></script>
      <!-- site icon -->
      <link rel="icon" href="images/fevicon.png" type="image/png" />
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css" />
      <!-- site css -->
      <link rel="stylesheet" href="style.css" />
      <!-- responsive css -->
      <link rel="stylesheet" href="css/responsive.css" />
      <!-- color css -->
      <link rel="stylesheet" href="css/colors.css" />
      <!-- select bootstrap -->
      <link rel="stylesheet" href="css/bootstrap-select.css" />
      <!-- scrollbar css -->
      <link rel="stylesheet" href="css/perfect-scrollbar.css" />
      <!-- custom css -->
      <link rel="stylesheet" href="css/custom.css" />
      <!-- responsive queries -->
      <link rel="stylesheet" href="queries.css">
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
   </head>
   <body class="dashboard dashboard_1">
      <div class="full_container">
         <div class="inner_container">
            <!-- Sidebar  -->
            <nav id="sidebar">
               <div class="sidebar_blog_1">
                  <div class="sidebar-header">
                     <div class="logo_section">
                        <a href="dashboard.html"><img class="logo_icon img-responsive" src="images/logo/Logo half.png" alt="#" /></a>
                     </div>
                  </div>
                  <div class="sidebar_user_info">
                     <div class="icon_setting"></div>
                     <div class="user_profle_side">
                        <div class="user_img"><img class="img-responsive" src="images/person2.jpg" alt="#" /></div>
                        <div class="user_info">
                           <h6>Grace Ore</h6>
                           <p><span class="online_animation"></span> Online</p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="sidebar_blog_2">
                  <ul class="list-unstyled components">
                     <li class="active">
                        <a href="All Messages-Admin.html"><i class="fa fa-home yellow_color"></i> <span>All Messages</span></a>
                     </li>
                     <li><a href="Upload Messages.html"><i class="fa fa-upload orange_color"></i> <span>Upload Messages</span></a>
                     </li>
                     <li>
                        <a href="Add Minister.html"><i class="fa fa-user-plus purple_color"></i> <span>Add Minister</span></a>
                     </li>
                     <li><a href="Add Meeting.html"><i class="fa fa-file-circle-plus purple_color2"></i> <span>Add Meeting</span></a></li>
                     <li><a href="Add Event.html"><i class="fa fa-calendar-plus orange_color"></i> <span>Add Event</span></a></li>
                     <li><a href="Add Glory Journal.html"><i class="fa fa-book yellow"></i> <span>Add Glory Journal</span></a></li>
                     <li><a href="Add-Audio.html"><i class="fa fa-book blue1_color"></i> <span>Add Short Audio</span></a></li>
                     <!-- <li>
                        <a href="Worship.html"><i class="fa fa-music blue2_color"></i> <span>Worship</span></a>
                     </li>
                     <li><a href="Songs.html"><i class="fa fa-guitar blue1_color"></i> <span>Songs Birthed By TCGC</span></a></li> -->
                     <li class="hidden-menu"><a href="Profile-Admin.html"><i class="fa fa-user green_color"></i> <span>My Profile</span></a></li>
                     <li class="hidden-menu"><a href="Change_Password_Admin.html"><i class="fa fa-key blue1_color"></i> <span>Change Password</span></a></li>
                     <li class="hidden-menu"><a href="Subscribe-Admin.html"><i class="fa fa-bookmark-o red_color"></i> <span>Subscription Plan</span></a></li>
                     <li class="hidden-menu"><a href="login.html"><i class="fa fa-sign-out brown_color"></i> <span>Log Out</span></a></li>
                  </ul>
               </div>
            </nav>
            <!-- end sidebar -->
            <!-- right content -->
            <div id="content">
               <!-- topbar -->
               <div class="topbar">
                  <nav class="navbar navbar-expand-lg navbar-light">
                     <div class="full">
                        <button type="button" id="sidebarCollapse" class="sidebar_toggle"><i class="fa fa-bars"></i></button>
                        <div class="logo_section">
                           <a href="index.html"><img class="img-responsive" src="images/logo/Logo full.png" alt="#" /></a>
                        </div>
                        <div class="center-content" id="center-content">
                           <i class="fa-solid fa-search hide" id="search-icon"></i>
                           <div class="search" id="search">
                              <i class="fa-solid fa-search fa-lg"></i>
                              <input type="search" id="search-input" name="search-input" placeholder="Search messages, songs ...">
                              <a href="search.html"><i class="fa-solid fa-search fa-lg" id="clear"></i></a>
                           </div>
                        </div>
                        <div class="right_topbar">
                           <div class="icon_info">
                              <ul>
                                 <li><a href="#"><i class="fa fa-bell-o"></i><span class="badge">2</span></a></li>
                                 <li><a href="#"><i class="fa fa-envelope-o"></i><span class="badge">3</span></a></li>
                              </ul>
                              <ul class="user_profile_dd">
                                 <li>
                                    <a class="dropdown-toggle" data-toggle="dropdown"><img class="img-responsive rounded-circle" src="images/person2.jpg" alt="#" /><span class="name_user">Grace Ore</span></a>
                                    <div class="dropdown-menu">
                                       <a class="dropdown-item" href="Profile-Admin.html"><i class="fa fa-user"></i><span>&nbsp;&nbsp;&nbsp;My Profile</span></a>
                                       <a class="dropdown-item" href="Change_Password_Admin.html"><i class="fa fa-key"></i><span>&nbsp;&nbsp;&nbsp;Change Password</span></a>
                                       <a class="dropdown-item" href="Subscribe-Admin.html"><i class="fa fa-bookmark-o"></i><span>&nbsp;&nbsp;&nbsp;Subscription Plan</span></a>
                                       <a class="dropdown-item" href="login.html"><i class="fa fa-sign-out"></i><span>&nbsp;&nbsp;&nbsp;Log Out</span> </a>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </nav>
               </div>

               <!-- MOBILE SEARCH BAR -->
               <div class="mobile-search hide" id="mobile-search">
                  <i class="fa-solid fa-arrow-left fa-lg" id="close-search"></i>
                  <input type="search" id="mobile-search-input" name="search-input" placeholder="Search messages, songs ...">
                  <a href="search.html"><i class="fa-solid fa-search fa-lg mobile-clear" id="mobile-clear"></i></a>
               </div>
               <!-- end topbar -->
               
               <!-- dashboard inner -->
               <div class="midde_cont">
                  <div class="container-fluid">
                     <div class="row column_title">
                        <div class="col-md-12">
                           <div class="page_title">
                              <h2>Welcome <span>Grace</span></h2>
                           </div>
                        </div>
                     </div>

							<div class="table_section padding_infor_info">
								<div class="table-responsive-sm">
									<table class="table table-striped" id="message-table">
										<thead>
											<tr>
												<th>S/N</th>
												<th>Message Title</th>
												<th>Minister Name</th>
												<th>Category</th>
												<th>Date</th>
												<th></th>
												<th></th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td class="serial-number">1</td>
												<td>John</td>
												<td>Doe</td>
												<td>Doe</td>
												<td>john</td>
												<td><a href="#" class="update-info">Update</a></td>
												<td><a href="#" class="delete-info">Delete</a></td>
											</tr>
											<tr>
												<td class="serial-number">2</td>
												<td>Mary</td>
												<td>Moe</td>
												<td>Moe</td>
												<td>mary</td>
                                    <td><a href="#" class="update-info">Update</a></td>
												<td><a href="#" class="delete-info">Delete</a></td>
											</tr>
											<tr>
												<td class="serial-number">3</td>
												<td>July</td>
												<td>Dooley</td>
												<td>Dooley</td>
												<td>july</td>
                                    <td><a href="#" class="update-info">Update</a></td>
												<td><a href="#" class="delete-info">Delete</a></td>
											</tr>
											<tr>
												<td class="serial-number">4</td>
												<td>Mary</td>
												<td>Moe</td>
												<td>Moe</td>
												<td>mary</td>
                                    <td><a href="#" class="update-info">Update</a></td>
												<td><a href="#" class="delete-info">Delete</a></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>

                  </div>
               </div>
               <!-- end dashboard inner -->
            </div>
         </div>

         <!-- Update Form Modal -->
         <div id="update-modal" class="modal">
            <div class="modal-content">
               <span id="close-modal" class="close-button">&times;</span>
               <h2>Update Record</h2>
               <form id="update-form">
                  <label for="update-title">Message Title:</label>
                  <input type="text" id="update-title" name="update-title" required>
                  <label for="update-name">Minister Name:</label>
                  <input type="text" id="update-name" name="update-name" required>
                  <label for="update-category">Category:</label>
                  <input type="text" id="update-category" name="update-category" required>
                  <label for="update-date">Date:</label>
                  <input type="date" id="update-date" name="update-date" required>
                  <input type="hidden" id="update-id" name="id">
                  <button type="submit">Save Changes</button>
               </form>
            </div>
      </div>

      </div>
      <!-- jQuery -->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.min.js"></script>
      <!-- wow animation -->
      <script src="js/animate.js"></script>
      <!-- select country -->
      <script src="js/bootstrap-select.js"></script>
      <!-- owl carousel -->
      <script src="js/owl.carousel.js"></script> 
      <!-- chart js -->
      <script src="js/Chart.min.js"></script>
      <script src="js/Chart.bundle.min.js"></script>
      <script src="js/utils.js"></script>
      <script src="js/analyser.js"></script>
      <!-- nice scrollbar -->
      <script src="js/perfect-scrollbar.min.js"></script>
      <script>
         var ps = new PerfectScrollbar('#sidebar');

         document.addEventListener('DOMContentLoaded', () => {

            // Clearing the search input
            const clearSearchField = document.getElementById("clear")
            const searchInput = document.getElementById("search-input")
            const searchIcon = document.getElementById("search-icon")
            const closeSearchBar = document.getElementById("close-search")
            const clearSearchBar = document.getElementById("mobile-clear")
            const mobileSearchBar = document.getElementById("mobile-search")
            const mobileSearchInput = document.getElementById("mobile-search-input")

            function clearInputField(input, icon) {
               input.value = ""
               icon.style.display = "none"
               input.focus()
            }

            // clearing the search fields
            // clearSearchField.addEventListener("click", () => clearInputField(searchInput, clearSearchField))
            // mobile
            // clearSearchBar.addEventListener("click", () => clearInputField(mobileSearchInput, clearSearchBar))

            // showing the cancel icon when there is input
            searchInput.addEventListener('input', () => {
               if (searchInput.value.length > 0) {
                  clearSearchField.style.display = 'block';
               } else {
                  clearSearchField.style.display = 'none';
               }
            });

            // shows the cancel icon when there's input
            mobileSearchInput.addEventListener('input', () => {
               if (mobileSearchInput.value.length > 0) {
                  clearSearchBar.style.display = 'block';
               } else {
                  clearSearchBar.style.display = 'none';
               }
            });
            
            // opens and closes the mobile Search Bar when the search icon is clicked
            searchIcon.addEventListener("click", () => DisplayDiv(mobileSearchBar))
            closeSearchBar.addEventListener("click", () => DisplayDiv(mobileSearchBar))

            function DisplayDiv(div) {
               if (div.classList.contains("hide")) {
                  div.classList.remove('hide');
                  div.classList.add('show');
               } else {
                  div.classList.remove('show');
                  div.classList.add('hide');
               }
            }

            // Get the table element
            const table = document.getElementById('message-table');

            // Add event listeners to table rows
            table.addEventListener('click', function(e) {
               e.preventDefault();
               const target = e.target;

               // Handle delete action
               if (target.classList.contains('delete-info')) {
                  const row = target.closest('tr');
                  row.remove();
                  renumberTable();
                  // if (confirm('Are you sure you want to delete this row?')) {
                  //       row.remove();
                  // }
               }
            });

            // Function to renumber the serial numbers
            function renumberTable() {
               const rows = table.querySelectorAll('tbody tr');
               rows.forEach((row, index) => {
                  row.querySelector('.serial-number').textContent = index + 1;
               });
            }

            // Get modal elements
            const updateModal = document.getElementById('update-modal');
            const closeModal = document.getElementById('close-modal');
            const updateForm = document.getElementById('update-form');
            const updateTitle = document.getElementById('update-title');
            const updateName = document.getElementById('update-name');
            const updateCategory = document.getElementById('update-category');
            const updateDate = document.getElementById('update-date');
            const updateId = document.getElementById('update-id');

            // Function to open the modal with data from the row
            function openModal(row) {
               // Fill the form with data from the row
               updateTitle.value = row.querySelector('td:nth-child(2)').textContent; // Message Title
               updateName.value = row.querySelector('td:nth-child(3)').textContent; // Minister Name
               updateCategory.value = row.querySelector('td:nth-child(4)').textContent; // Category
               updateDate.value = row.querySelector('td:nth-child(5)').textContent; // Date
               updateId.value = row.querySelector('td:nth-child(1)').textContent; // Serial Number

               // Show the modal
               updateModal.style.display = 'block';
            }

            // Function to close the modal
            function closeModalHandler() {
               updateModal.style.display = 'none';
            }

            // Function to handle form submission
            function updateFormHandler(event) {
               event.preventDefault();

               // Get form data
               const title = updateTitle.value;
               const name = updateName.value;
               const category = updateCategory.value;
               const date = updateDate.value;
               const id = updateId.value;

               // Find the row and update its content
               const row = Array.from(document.querySelectorAll('#message-table tbody tr')).find(row => row.querySelector('td.serial-number').textContent === id);
               if (row) {
                  row.querySelector('td:nth-child(2)').textContent = title; // Update Message Title
                  row.querySelector('td:nth-child(3)').textContent = name; // Update Minister Name
                  row.querySelector('td:nth-child(4)').textContent = category; // Update Category
                  row.querySelector('td:nth-child(5)').textContent = date; // Update Date
               }

               // Close the modal
               closeModalHandler();
            }

            // Add event listener to close button
            closeModal.addEventListener('click', closeModalHandler);

            // Add event listener to the form submission
            updateForm.addEventListener('submit', updateFormHandler);

            // Add event listeners to all update links
            document.querySelectorAll('.update-info').forEach(link => {
               link.addEventListener('click', function(event) {
                  event.preventDefault(); // Prevent the default link behavior
                  openModal(this.closest('tr'));
               });
            });

            // Close the modal when clicking outside the modal content
            window.addEventListener('click', function(event) {
               if (event.target === updateModal) {
                  closeModalHandler();
               }
            });




         });

         
      </script>
      <!-- custom js -->
      <script src="js/chart_custom_style1.js"></script>
      <script src="js/custom.js"></script>

   </body>
</html>